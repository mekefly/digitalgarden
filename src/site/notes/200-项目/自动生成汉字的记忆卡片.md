---
{"dg-publish":true,"permalink":"/200-é¡¹ç›®/è‡ªåŠ¨ç”Ÿæˆæ±‰å­—çš„è®°å¿†å¡ç‰‡/","dgPassFrontmatter":true,"noteIcon":"","created":"","updated":""}
---

### ğŸ§² çº¿ç´¢ï¼š
#200-é¡¹ç›® 
[[200-é¡¹ç›®/1000ä¸ªæœ€å¸¸ç”¨æ±‰å­—\|1000ä¸ªæœ€å¸¸ç”¨æ±‰å­—]]


ğŸ—“ï¸ åˆ›å»ºæ—¥æœŸï¼š [[200-é¡¹ç›®/2023-08-18#16:02\|200-é¡¹ç›®/2023-08-18#16:02]] 

---
## âœï¸ ç¬”è®°

### ç®€ä»‹
1. ä¸‹é¢è¿™ä¸ªè„šæœ¬å°†ä¼šç”Ÿæˆä¸€ä¸ªæ–‡æ¡£ï¼Œè¿™ä¸ªæ–‡æ¡£æ˜¯ç»™[é—´éš”å¤ä¹ æ’ä»¶](obsidian://show-plugin?id=obsidian-spaced-repetition)æ¥å­¦ä¹ ä¸­æ–‡æ–‡å­—ï¼Œå¹¶é»˜å†™çš„
2. å»ºè®®æŸ¥çœ‹å¡ç‰‡ååœ¨æœ¬ä¸Šå°è¯•å†™å‡ºæ¥ï¼Œå¦‚æœå¯å†™å°±ç‚¹ç®€å•ï¼Œå¦‚æœå›æƒ³ä¸€ä¼šèƒ½å†™å‡ºæ¥å°±ç‚¹æ™®é€šï¼Œå†™ä¸å‡ºæ¥ç‚¹å›°éš¾


### è‡ªåŠ¨ç”Ÿæˆæ–‡å­—çš„è®°å¿†å¡ç‰‡
```typescript
import axios from "axios";

import cheerio from "cheerio";

  

var fs = require("fs");

const outputName = "./output.md";

  

//ä¼˜åŒ–å¤„ç†

let text = "æ˜¥ é›† ä¸ˆ æœ¨ ç ” ç­ æ™® å¯¼ é¡¿ ç¡ å±• è·³";

  

let textList = text.replaceAll(" ", "").split("");

  

main();

async function main() {

Â  //æ¸…ç©º

Â  fs.writeFileSync(outputName, "");

Â  console.log("å…±", textList.length, "ä¸ªå­—");

  

Â  for (let index = 1; index <= textList.length; index++) {

Â  Â  const word = textList[index - 1];

Â  Â  console.log(`${index}/${textList.length} ${word}`);

Â  Â  attempts;

Â  Â  try {

Â  Â  Â  //å‡ºé”™å°è¯•3æ¬¡

Â  Â  Â  const explain = await attempts(async () => {

Â  Â  Â  Â  return await searchExplain(word);

Â  Â  Â  }, 3);

Â  Â  Â  fs.appendFileSync(outputName, `${explain}\n?\n${index}.${word}\n\n\n\n`);

Â  Â  Â  // await timeout(100);

Â  Â  } catch (error) {

Â  Â  Â  console.log(`${index}/${textList.length} ${word}`, "å‡ºé”™äº†");

Â  Â  }

Â  }

}

  

/**

Â * æœç´¢æ–‡å­—çš„è¯¦ç»†ä¿¡æ¯

Â * @param target

Â * @returns

Â */

async function searchExplain(target: string) {

Â  return await axios

Â  Â  .get(`https://zidian.gushici.net/search/zi.php?zi=${target}`)

Â  Â  .then((resp) => {

Â  Â  Â  let $ = cheerio.load(resp.data);

Â  Â  Â  // let lis = $(".dsk_2_1:first-child .z_d");

Â  Â  Â  // for (var i = 0; i < lis.length; i++) {

Â  Â  Â  // Â  var li = lis.eq(i);

Â  Â  Â  // Â  console.log(li.text());

Â  Â  Â  // }

Â  Â  Â  let text = $(

Â  Â  Â  Â  ".content.definitions.jnr > p,.content.definitions.jnr > hr,.content.definitions.jnr > ol"

Â  Â  Â  );

Â  Â  Â  return text.toString().replaceAll(target, "~");

Â  Â  });

}

  

/**

Â * å°è¯•å¤šæ¬¡

Â * @param fn

Â * @param n

Â * @returns

Â */

async function attempts<E>(fn: () => Promise<E>, n: number): Promise<E> {

Â  const v = fn();

Â  if (n <= 0) {

Â  Â  return v;

Â  } else {

Â  Â  return v.catch((e) => {

Â  Â  Â  console.log(e);

Â  Â  Â  console.log(`å°è¯•ç¬¬${n}æ¬¡`);

Â  Â  Â  return attempts(fn, n - 1);

Â  Â  });

Â  }

}

  

/**

Â * å»¶è¿Ÿ

Â * @param x

Â * @returns

Â */

async function timeout(x: number) {

Â  return new Promise<void>((resolve, reject) => {

Â  Â  setTimeout(() => {

Â  Â  Â  resolve();

Â  Â  }, x);

Â  });

}
```
### é¢„è§ˆ

![Pasted image 20230819144806.png](/img/user/800-%E9%99%84%E4%BB%B6/Pasted%20image%2020230819144806.png)

![Pasted image 20230819144851.png](/img/user/800-%E9%99%84%E4%BB%B6/Pasted%20image%2020230819144851.png)
## ğŸ’¼ æ€»ç»“

